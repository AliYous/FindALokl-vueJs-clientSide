(function(t){function e(e){for(var o,n,s=e[0],c=e[1],l=e[2],d=0,m=[];d<s.length;d++)n=s[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&m.push(i[n][0]),i[n]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],o=!0,s=1;s<a.length;s++){var c=a[s];0!==i[c]&&(o=!1)}o&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var o={},i={app:0},r=[];function n(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=o,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var o=a("8a23"),i=a.n(o);i.a},"03ae":function(t,e,a){"use strict";var o=a("b209"),i=a.n(o);i.a},"0955":function(t,e,a){"use strict";var o=a("865c"),i=a.n(o);i.a},"0c62":function(t,e,a){},"0ed3":function(t,e,a){t.exports=a.p+"img/enjoy.c7896909.svg"},"12c9":function(t,e,a){"use strict";var o=a("c0ec"),i=a.n(o);i.a},1908:function(t,e,a){"use strict";var o=a("a626"),i=a.n(o);i.a},"1be5":function(t,e,a){},"1ea0":function(t,e,a){},"1eed":function(t,e,a){t.exports=a.p+"img/discuss.b893d3d7.svg"},"1fe6":function(t,e,a){"use strict";var o=a("1be5"),i=a.n(o);i.a},"2c80":function(t,e,a){"use strict";var o=a("ed0b"),i=a.n(o);i.a},"3b9a":function(t,e,a){},4805:function(t,e,a){},5154:function(t,e,a){"use strict";var o=a("9c3c"),i=a.n(o);i.a},"51f2":function(t,e,a){t.exports=a.p+"img/search.3a7d070c.svg"},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"bus",(function(){return $e}));a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("div",{staticClass:"header"},[a("TheHeaderNavbar")],1),a("v-content",{staticClass:"content-container"},[a("router-view")],1)],1)},r=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header"},[a("v-card",{attrs:{color:"white",height:"8vh",flat:""}},[a("v-toolbar",{staticStyle:{"padding-top":"1rem"},attrs:{flat:"",dense:""}},[a("v-toolbar-title",{staticClass:"logo",on:{click:t.homeRedirect}},[t._v("FindaLokl")]),a("v-spacer"),a("div",{staticClass:"nav-links",class:{active:t.showMobileNav}},[a("v-btn",{staticClass:"about-btn",attrs:{text:""},on:{click:function(e){e.preventDefault(),t.showMobileNav=!1}}},[t._v(" About this project ")]),t.isLoggedIn?a("v-btn",{staticClass:"btn-logout",attrs:{text:""},on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("Logout")]):a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("div",{staticClass:"btn-connect-sign"},[a("v-btn",{staticClass:"btn-connect",attrs:{outlined:""},on:{click:function(e){e.preventDefault(),t.onConnectClick(),t.showMobileNav=!1}}},[t._v(" Connect ")]),a("v-btn",{staticClass:"btn-sign-up",attrs:{dark:"",color:"#F38633"},on:{click:function(e){e.preventDefault(),t.onSignUpClick(),t.showMobileNav=!1}}},[t._v(" Sign Up as a local ")])],1)])],1),a("div",{staticClass:"burger",on:{click:function(e){t.showMobileNav=!t.showMobileNav}}},[a("div",{staticClass:"line"}),a("div",{staticClass:"line"}),a("div",{staticClass:"line"})])],1)],1)],1),a("TheAuthDialog")],1)},s=[],c=a("5530"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"800"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("div",{staticClass:"container-fluid"},[a("v-card",{staticClass:"mx-auto card",attrs:{"max-width":"700"}},[a("v-icon",{staticClass:"close-cross",attrs:{color:"black"},on:{click:t.closeDialog}},[t._v("mdi-close-circle")]),!t.userExists&&t.registerAsLocal?a("h1",[t._v("Register As Local")]):t._e(),t.userExists||t.registerAsLocal?t._e():a("h1",[t._v("Register")]),t.userExists?a("h1",[t._v("Sign in")]):t._e(),t.error?a("div",{staticClass:"alert alert-danger error"},[t._v(t._s(t.error))]):t._e(),a("form",{staticClass:"form container"},[t.userExists?t._e():a("v-text-field",{staticClass:"text-field",attrs:{required:"",outlined:"",color:"#493E92",rounded:"",label:"First name"},model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}}),a("v-text-field",{staticClass:"text-field",attrs:{required:"",outlined:"",color:"#493E92",rounded:"",label:"Email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),a("v-text-field",{attrs:{required:"",outlined:"",color:"#493E92",rounded:"",label:"Password",type:"password"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSignIn(e)}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t.userExists?t._e():a("v-text-field",{attrs:{required:"",outlined:"",color:"#493E92",rounded:"",label:"Password confirmation",type:"password"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSignUp(e)}},model:{value:t.form.password_confirmation,callback:function(e){t.$set(t.form,"password_confirmation",e)},expression:"form.password_confirmation"}}),t.userExists?t._e():a("v-btn",{attrs:{color:"#F38633",loading:t.loading,rounded:"","x-large":"",dark:""},on:{click:t.onSignUp}},[t._v("Register")]),t.userExists?a("v-btn",{attrs:{color:"#F38633",loading:t.loading,rounded:"","x-large":"",dark:""},on:{click:t.onSignIn}},[t._v("Sign in")]):t._e()],1),t.userExists?t._e():a("a",{staticClass:"already-member-text",attrs:{role:"button"},on:{click:t.changeUserExistsBool}},[t._v("Already a member?")]),t.userExists?a("a",{staticClass:"already-member-text",attrs:{role:"button"},on:{click:t.changeUserExistsBool}},[t._v("Create an account")]):t._e()],1)],1)])},u=[],d=(a("96cf"),a("1da1")),m=a("2f62"),f=a("bc3a"),v=a.n(f),p={name:"TheAuthDialog",created:function(){var t=this;$e.$on("dialog",(function(e,a,o){t.dialog=e,t.registerAsLocal=a,t.userExists=o}))},data:function(){return{dialog:!1,form:{first_name:"",email:"",password:"",password_confirmation:""},userExists:!0,loading:!1,registerAsLocal:!1,error:null}},methods:Object(c["a"])({},Object(m["b"])(["login","register"]),{onSignIn:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t.form.email,o=t.form.password,e.prev=3,e.next=6,t.login({email:a,password:o});case 6:if(i=e.sent,!i.isLocal||!i.firstTimeVisit){e.next=10;break}return e.next=10,v.a.get("http://localhost:3000/api/locals/user_id/".concat(i._id)).then((function(e){t.$router.push({name:"LocalProfileEdit",params:{local_id:e.data[0]._id}})}));case 10:t.loading=!1,t.dialog=!1,e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](3),t.loading=!1,console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[3,14]])})))()},onSignUp:function(){var t=this;this.loading=!0;var e={name:this.form.first_name,email:this.form.email,password:this.form.password,isLocal:this.registerAsLocal};this.register(e).then((function(){t.loading=!1,t.userExists=!0}))},changeUserExistsBool:function(){this.userExists=!this.userExists},closeDialog:function(){this.dialog=!1}})},h=p,g=(a("5e80"),a("2877")),b=a("6544"),_=a.n(b),C=a("8336"),y=a("b0af"),w=a("169a"),x=a("132d"),k=a("8654"),L=Object(g["a"])(h,l,u,!1,null,"fbe1ad12",null),S=L.exports;_()(L,{VBtn:C["a"],VCard:y["a"],VDialog:w["a"],VIcon:x["a"],VTextField:k["a"]});var I={name:"TheHeaderNavbar",components:{TheAuthDialog:S},data:function(){return{showAuthDialog:!1,localSignupDialog:!1,showMobileNav:!1}},computed:Object(c["a"])({},Object(m["c"])({userLoggedIn:"isLoggedIn"}),{isLoggedIn:function(){return this.userLoggedIn}}),methods:Object(c["a"])({},Object(m["b"])(["logout"]),{homeRedirect:function(){this.$router.push({name:"Home"})},onConnectClick:function(){$e.$emit("dialog",!0,!1,!0)},onSignUpClick:function(){this.$router.push({name:"LocalsLandingPage"})}})},P=I,A=(a("2c80"),a("2fa4")),E=a("71d9"),$=a("2a7f"),O=Object(g["a"])(P,n,s,!1,null,"cdf0cda6",null),j=O.exports;_()(O,{VBtn:C["a"],VCard:y["a"],VSpacer:A["a"],VToolbar:E["a"],VToolbarTitle:$["a"]});var V={name:"App",components:{TheHeaderNavbar:j},data:function(){return{}}},R=V,M=(a("034f"),a("7496")),q=a("a75b"),T=Object(g["a"])(R,i,r,!1,null,null,null),D=T.exports;_()(T,{VApp:M["a"],VContent:q["a"]});var B=a("8c4f"),H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("TheHeaderImgAndSearch",{attrs:{minified:!1}}),a("div",{staticClass:"how-it-works-container"},[a("HowItWorks")],1)],1)},F=[],N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-header",class:{"container-header-minified":t.minify}},[a("div",{staticClass:"header-search"},[a("div",{staticClass:"text-header"},[t.minify?t._e():a("h2",[t._v("Find a Lokl")]),t.minify?t._e():a("h3",[t._v("To show you around")])]),a("TheSearchBar",{attrs:{citySearched:t.citySearched}})],1)])},U=[],W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-container"},[a("v-icon",{staticStyle:{left:"0.5rem"}},[t._v("mdi-map-search-outline")]),a("vue-google-autocomplete",{ref:"citySearch",staticClass:"autocomplete-bar",attrs:{id:"map",classname:"form-control",placeholder:"Where Next?",types:"(cities)"},on:{placechanged:t.getCity},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}}),t._v(" --\x3e "),a("v-btn",{staticClass:"search-btn",attrs:{color:"#F38633",height:"3.45rem",dark:"",rounded:"",loading:t.loading},on:{click:function(e){return t.browseLocals(t.city)}}},[t._v(" Browse Locals ")])],1)},z=[],J=a("0118"),Y={components:{VueGoogleAutocomplete:J["a"]},props:["citySearched"],data:function(){return{city:"",loading:!1}},mounted:function(){this.$refs.citySearch.update(this.$props.citySearched)},methods:{getCity:function(t){this.city=t.locality+", "+t.country},browseLocals:function(t){this.loading=!0,this.$router.push({name:"BrowseLocals",params:{city:t}})}}},G=Y,K=(a("5154"),Object(g["a"])(G,W,z,!1,null,"2e836d40",null)),Q=K.exports;_()(K,{VBtn:C["a"],VIcon:x["a"]});var X={name:"TheHeaderImgAndSearch",props:["minified","citySearched"],data:function(){return{minify:this.$props.minified}},components:{TheSearchBar:Q}},Z=X,tt=(a("1908"),Object(g["a"])(Z,N,U,!1,null,"cf37df9a",null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-card",{staticClass:"mx-auto main-card",attrs:{"max-width":"65%",raised:""}},[o("v-list-item",[o("v-list-item-content",[o("v-list-item-title",{staticClass:"headline"},[t._v("How it works ?")])],1)],1),o("div",{staticClass:"steps"},[o("div",{staticClass:"individual-step"},[o("img",{attrs:{src:a("51f2"),alt:""}}),o("h5",{staticClass:"margin-top"},[t._v("Browse locals. Find the one you like")])]),o("div",{staticClass:"individual-step"},[o("img",{attrs:{src:a("1eed"),alt:""}}),o("h5",[t._v("Plan and discuss activities before you meet")])]),o("div",{staticClass:"individual-step"},[o("img",{attrs:{src:a("0ed3"),alt:""}}),o("h5",{staticClass:"margin-top"},[t._v("Witness the city through the eyes of a local")])])])],1)},ot=[],it={name:"HowItWorks"},rt=it,nt=(a("e13d"),a("da13")),st=a("5d23"),ct=Object(g["a"])(rt,at,ot,!1,null,"668dca89",null),lt=ct.exports;_()(ct,{VCard:y["a"],VListItem:nt["a"],VListItemContent:st["a"],VListItemTitle:st["b"]});var ut={name:"Home",components:{TheHeaderImgAndSearch:et,HowItWorks:lt}},dt=ut,mt=(a("6eef"),Object(g["a"])(dt,H,F,!1,null,"7c69348e",null)),ft=mt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"header"},[a("TheHeaderImgAndSearch",{attrs:{minified:!0,citySearched:t.city}})],1),a("div",{staticClass:"top-text"},[a("h4",[t._v(" Explore "),a("u",[t._v(t._s(t.lastSearchInput))]),t._v(", with one of 722 Locals ")])]),t.loading?a("div",{staticClass:"progress-circle container"},[a("v-progress-circular",{attrs:{indeterminate:"",size:70,width:7,color:"purple"}})],1):t._e(),a("div",{staticClass:"list"},[t.loading?t._e():a("LocalPreviewList")],1)])},pt=[],ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"local-previews-list container"},t._l(t.browseLocalsList,(function(t){return a("div",{key:t._id,staticClass:"local-previews-row"},[a("LocalPreviewItem",{attrs:{localPreview:t}})],1)})),0)},gt=[],bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("v-card",{staticClass:"main-card",attrs:{raised:""},on:{click:function(e){return e.preventDefault(),t.onPreviewClick(t.localPreview.local_id)}}},[a("div",{staticClass:"card-horizontal"},[a("div",{staticClass:"imagePreviewWrapper",style:{"background-image":"url("+t.localPreview.localImage+")"}}),a("div",{staticClass:"card-body"},[a("div",{staticClass:"name-city-price-container container-fluid row"},[a("div",{staticClass:"name-price-col col"},[a("h5",{staticClass:"local-name"},[t._v(t._s(t.localPreview.name))]),a("h6",{staticClass:"city-name"},[t._v(t._s(t.localPreview.localCity))])]),a("h4",{staticClass:"price"},[t._v("€ "+t._s(t.localPreview.hourlyRate)+"/h")])]),a("v-divider",{staticClass:"divider",staticStyle:{"margin-top":"-0.5rem"}}),a("div",{staticClass:"quote-row container",staticStyle:{height:"5rem"}},[a("v-icon",{staticClass:"opening-quote"},[t._v("mdi-format-quote-open")]),a("p",{staticClass:"card-text"},[t._v(t._s(t.localPreview.quote))]),a("v-icon",{staticClass:"closing-quote"},[t._v("mdi-format-quote-close")])],1),a("v-divider",{staticClass:"divider"})],1)])])],1)},_t=[],Ct={name:"LocalPreviewItem",props:["localPreview"],methods:{onPreviewClick:function(t){this.$router.push({name:"LocalProfilePage",params:{local_id:t}})}}},yt=Ct,wt=(a("c164"),a("ce7e")),xt=Object(g["a"])(yt,bt,_t,!1,null,"79eca356",null),kt=xt.exports;_()(xt,{VCard:y["a"],VDivider:wt["a"],VIcon:x["a"]});var Lt={name:"LocalPreviewList",components:{LocalPreviewItem:kt},computed:{lastSearchInput:function(){return this.$store.getters.citySearched},browseLocalsList:function(){return this.$store.getters.lastLoadedLocals}},data:function(){return{}}},St=Lt,It=(a("12c9"),Object(g["a"])(St,ht,gt,!1,null,"35ee05e2",null)),Pt=It.exports,At={name:"BrowseLocals",props:["city"],components:{TheHeaderImgAndSearch:et,LocalPreviewList:Pt},computed:{lastSearchInput:function(){return this.$store.getters.citySearched},browseLocalsList:function(){return this.$store.getters.lastLoadedLocals}},created:function(){var t=this;this.fetchLocalPreviews(this.city).then((function(){setTimeout((function(){t.loading=!1}),1e3)}))},data:function(){return{loading:!0}},methods:Object(c["a"])({},Object(m["b"])(["fetchLocalPreviews"]))},Et=At,$t=(a("c1c9"),a("490a")),Ot=Object(g["a"])(Et,vt,pt,!1,null,"6d8dd9f9",null),jt=Ot.exports;_()(Ot,{VProgressCircular:$t["a"]});var Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"container-header"},[a("h1",[t._v("Sign up as a Lokl")]),a("h2",[t._v("Show travellers around and make money")]),a("v-btn",{staticClass:"btn-sign-up",attrs:{dark:"","x-large":"",color:"#F38633"},on:{click:function(e){return e.preventDefault(),t.onSignUpClick()}}},[t._v(" Sign Up as a local ")])],1),a("div",{staticClass:"container-fluid"},[a("v-card",{staticClass:"mx-auto main-card",attrs:{"max-width":"60%",raised:""}},[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",{staticClass:"headline"},[t._v("Become a Lokl")]),a("p",[t._v("Anyone can do it!")])],1)],1)],1)],1)])},Rt=[],Mt={name:"LocalsLandingPage",methods:{onSignUpClick:function(){$e.$emit("dialog",!0,!0,!1)}}},qt=Mt,Tt=(a("bf30"),Object(g["a"])(qt,Vt,Rt,!1,null,"d8e9200e",null)),Dt=Tt.exports;_()(Tt,{VBtn:C["a"],VCard:y["a"],VListItem:nt["a"],VListItemContent:st["a"],VListItemTitle:st["b"]});var Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"container main-info-container"},[a("v-card",{staticClass:"mx-auto card",attrs:{"max-width":"100%",raised:""}},[a("div",{staticClass:"card-horizontal"},[a("TheImagePreview",{attrs:{localImage:t.form.localImage},on:{changeImage:function(e){return t.updateLocalImage(e)}}}),a("div",{staticClass:"card-body"},[a("form",{staticClass:"form container"},[a("v-text-field",{staticClass:"text-field",attrs:{"prepend-inner-icon":"mdi-account-cowboy-hat",required:"",outlined:"",color:"#493E92",rounded:"",label:"First name"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),a("div",{staticClass:"search-container"},[a("v-icon",{staticStyle:{left:"0.9rem"}},[t._v("mdi-map-search-outline")]),a("vue-google-autocomplete",{ref:"citySearch",attrs:{id:"map",classname:"form-control autocomplete-bar",placeholder:"Your City",types:"(cities)"},on:{placechanged:t.getCity},model:{value:t.form.localCity,callback:function(e){t.$set(t.form,"localCity",e)},expression:"form.localCity"}})],1),a("div",{staticClass:"quote-section"},[a("v-icon",{staticClass:"opening-quote"},[t._v("mdi-format-quote-open")]),a("v-textarea",{staticClass:"quote-field text-field",attrs:{"prepend-inner-icon":"mdi-comment-quote",label:"Your favorite quote",rows:"2",rounded:"",outlined:"",color:"#493E92"},model:{value:t.form.quote,callback:function(e){t.$set(t.form,"quote",e)},expression:"form.quote"}}),a("v-icon",{staticClass:"closing-quote"},[t._v("mdi-format-quote-close")])],1)],1)])],1)])],1),a("div",{staticClass:"container profile-info-container"},[a("form",{staticClass:"form container"},[a("h4",[t._v("I will show you ....")]),a("v-textarea",{staticClass:"mx-2",attrs:{"prepend-inner-icon":"mdi-comment",label:"What will the tourists have the chance to enjoy during a tour with you?",rows:"3"},model:{value:t.form.tourDescription,callback:function(e){t.$set(t.form,"tourDescription",e)},expression:"form.tourDescription"}}),a("h4",[t._v("About Me")]),a("v-textarea",{staticClass:"mx-2",attrs:{"prepend-inner-icon":"mdi-comment",label:"Who are you? By letting them know what makes you special, it'll increase your chance of being booked by tourists that are made for you! ",rows:"3"},model:{value:t.form.aboutMe,callback:function(e){t.$set(t.form,"aboutMe",e)},expression:"form.aboutMe"}}),a("h4",[t._v("Your Hourly Rate")]),a("v-text-field",{attrs:{label:"How much do you want to be paid for showind people around your city ?",value:"10.00",prefix:"€",suffix:"per hour"},model:{value:t.form.hourlyRate,callback:function(e){t.$set(t.form,"hourlyRate",e)},expression:"form.hourlyRate"}})],1),a("v-btn",{staticClass:"ma-0 btn-submit",attrs:{dark:"",rounded:"","x-large":"",color:"#F38633",loading:t.loading},on:{click:function(e){return e.preventDefault(),t.onClickSubmit(t.form)}}},[t._v(" Save changes & view profile ")])],1)])},Ht=[],Ft=(a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.localImage?a("div",{staticClass:"imagePreviewWrapper",style:{"background-image":"url("+t.previewImage+")"},on:{click:t.selectImage}}):a("div",{staticClass:"imagePreviewWrapper",staticStyle:{"background-image":"url('http://via.placeholder.com/365x365')"},on:{click:t.selectImage}}),a("input",{ref:"fileInput",attrs:{type:"file"},on:{input:t.pickFile}})])}),Nt=[],Ut={data:function(){return{previewImage:this.$props.localImage}},props:["localImage"],methods:{selectImage:function(){this.$refs.fileInput.click()},pickFile:function(){var t=this,e=this.$refs.fileInput,a=e.files;if(console.log(a[0]),a&&a[0]){var o=new FileReader;o.onload=function(e){t.previewImage=e.target.result},o.readAsDataURL(a[0]),this.$emit("changeImage",a[0])}}}},Wt=Ut,zt=(a("1fe6"),Object(g["a"])(Wt,Ft,Nt,!1,null,null,null)),Jt=zt.exports,Yt={name:"LocalProfileEdit",props:["local_id"],components:{VueGoogleAutocomplete:J["a"],TheImagePreview:Jt},data:function(){return{loading:!1,form:{_id:"",user_id:"",name:"",localCity:"",quote:"",tourDescription:"",aboutMe:"",languages:"",hourlyRate:"",profile_isComplete:!0,localImage:null}}},created:function(){this.setLocal(this.local_id)},methods:{setLocal:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,v.a.get("http://localhost:3000/api/locals/id/".concat(t)).then((function(t){var a=t.data[0];e.form._id=a._id,e.form.user_id=a.user_id,e.form.name=a.name,e.form.localCity=a.localCity,e.form.quote=a.quote,e.form.tourDescription=a.tourDescription,e.form.aboutMe=a.aboutMe,e.form.languages=a.languages,e.form.hourlyRate=a.hourlyRate,e.form.localImage=a.localImage}));case 2:case"end":return a.stop()}}),a)})))()},getCity:function(t){this.form.localCity=t.locality+", "+t.country,console.log(this.form.localCity)},onClickSubmit:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,o=new FormData,o.append("file",t.localImage),i=t.localImage,t.localImage="",o.append("localData",JSON.stringify(t)),t.localImage=i,a.prev=7,a.next=10,v.a.put("http://localhost:3000/api/locals/id/".concat(e.local_id,"/update"),o).then((function(t){console.log(t.data)}));case 10:a.next=16;break;case 12:a.prev=12,a.t0=a["catch"](7),e.loading=!1,console.log(a.t0);case 16:e.loading=!1,e.$router.push({name:"LocalProfilePage",params:{local_id:e.form._id}});case 18:case"end":return a.stop()}}),a,null,[[7,12]])})))()},updateLocalImage:function(t){this.form.localImage=t}}},Gt=Yt,Kt=(a("0955"),a("a844")),Qt=Object(g["a"])(Gt,Bt,Ht,!1,null,null,null),Xt=Qt.exports;_()(Qt,{VBtn:C["a"],VCard:y["a"],VIcon:x["a"],VTextField:k["a"],VTextarea:Kt["a"]});var Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.local?a("div",{staticClass:"container main-container"},[a("LocalProfileHeader",{attrs:{local:t.local}}),a("div",{staticClass:"profile-content container"},[a("h3",{staticClass:"explore-city-title"},[t._v("Explore "),a("u",[t._v(t._s(t.local.localCity))]),t._v(" with "+t._s(t.local.name)+" ")]),a("v-divider",{staticStyle:{"margin-top":"1rem"}}),t.readMoreActivated?t._e():a("LocalProfileAttribute",{attrs:{attributeName:"I will show you",attributeContent:t.local.tourDescription.slice(0,150),isLanguages:!1}}),t.readMoreActivated?a("LocalProfileAttribute",{attrs:{attributeName:"I will show you",attributeContent:t.local.tourDescription,isLanguages:!1}}):t._e(),t.readMoreActivated?t._e():a("a",{attrs:{href:"#"},on:{click:t.updateReadMoreActivated}},[t._v(" Read more... ")]),t.readMoreActivated?a("a",{attrs:{href:"#"},on:{click:t.updateReadMoreActivated}},[t._v(" Read less ")]):t._e(),a("v-divider",{staticStyle:{"margin-top":"1rem"}}),t.readMoreActivated?t._e():a("LocalProfileAttribute",{attrs:{attributeName:"About me",attributeContent:t.local.aboutMe.slice(0,150),isLanguages:!1}}),t.readMoreActivated?a("LocalProfileAttribute",{attrs:{attributeName:"About me",attributeContent:t.local.aboutMe,isLanguages:!1}}):t._e(),t.readMoreActivated?t._e():a("a",{attrs:{href:"#"},on:{click:t.updateReadMoreActivated}},[t._v(" Read more... ")]),t.readMoreActivated?a("a",{attrs:{href:"#"},on:{click:t.updateReadMoreActivated}},[t._v(" Read less ")]):t._e(),a("v-divider",{staticStyle:{"margin-top":"1rem"}}),a("LocalProfileAttribute",{attrs:{attributeName:"Languages",attributeContent:t.local.languages,isLanguages:!0}}),a("v-divider",{staticStyle:{"margin-top":"1rem"}}),a("v-btn",{staticClass:"cta-hidden",staticStyle:{"margin-bottom":"1rem"},attrs:{color:"#F38633",block:"",dark:""}},[t._v(" Contact "+t._s(t.local.name)+" ")])],1)],1):t._e()},te=[],ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("v-card",{staticClass:"main-card",attrs:{raised:""}},[a("div",{staticClass:"card-horizontal"},[a("div",{staticClass:"imagePreviewWrapper",style:{"background-image":"url("+t.local.localImage+")"}}),a("div",{staticClass:"card-body"},[a("div",{staticClass:"name-city-price-container container-fluid row"},[a("div",{staticClass:"name-price-col col"},[a("h5",{staticClass:"local-name"},[t._v(t._s(t.local.name))]),a("h6",{staticClass:"city-name"},[t._v(t._s(t.local.localCity))])]),a("h4",{staticClass:"price"},[t._v("€ "+t._s(t.local.hourlyRate)+"/h")])]),a("v-divider"),a("div",{staticClass:"quote-row container",staticStyle:{height:"5rem"}},[a("v-icon",{staticClass:"opening-quote"},[t._v("mdi-format-quote-open")]),a("p",{staticClass:"card-text"},[t._v(t._s(t.local.quote))]),a("v-icon",{staticClass:"closing-quote"},[t._v("mdi-format-quote-close")])],1),a("v-divider"),a("v-btn",{staticStyle:{"margin-bottom":"1rem"},attrs:{color:"#F38633",block:"",dark:""}},[t._v(" Contact "+t._s(t.local.name)+" ")])],1)])])],1)},ae=[],oe={name:"LocalProfileHeader",props:["local"]},ie=oe,re=(a("03ae"),Object(g["a"])(ie,ee,ae,!1,null,"3d587b65",null)),ne=re.exports;_()(re,{VBtn:C["a"],VCard:y["a"],VDivider:wt["a"],VIcon:x["a"]});var se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"attribute-row container"},[a("div",{staticClass:"attribute-name"},[a("h5",[t._v(t._s(t.attributeName))])]),t.isLanguages?t._e():a("div",{staticClass:"attribute-value"},[a("p",{staticStyle:{width:"95%"}},[t._v(" "+t._s(t.attributeContent)+" ")])]),t.isLanguages?a("div",{staticClass:"attribute-value languages-container"},t._l(t.attributeContent,(function(e,o){return a("div",{key:o},[a("v-btn",{staticClass:"single-lang",attrs:{disabled:""}},[t._v(" "+t._s(e)+" ")])],1)})),0):t._e()])},ce=[],le={name:"LocalProfileAttribute",props:["attributeName","attributeContent","isLanguages"]},ue=le,de=(a("9b05"),Object(g["a"])(ue,se,ce,!1,null,null,null)),me=de.exports;_()(de,{VBtn:C["a"]});var fe={name:"LocalProfilePage",props:["local_id"],components:{LocalProfileHeader:ne,LocalProfileAttribute:me},data:function(){return{loading:!1,local:null,readMoreActivated:!1}},created:function(){this.fetchLocal(this.local_id)},methods:{fetchLocal:function(t){var e=this;this.loading=!0,v.a.get("http://localhost:3000/api/locals/id/".concat(t)).then((function(t){e.loading=!1,e.local=t.data[0],console.log(t.data[0])}))},updateReadMoreActivated:function(){this.readMoreActivated=!this.readMoreActivated}}},ve=fe,pe=(a("79b0"),Object(g["a"])(ve,Zt,te,!1,null,"214a3a79",null)),he=pe.exports;_()(pe,{VBtn:C["a"],VDivider:wt["a"]}),o["a"].use(B["a"]);var ge=[{path:"/",name:"Home",component:ft},{path:"/locals/city/:city",name:"BrowseLocals",component:jt,props:!0},{path:"/become-a-local",name:"LocalsLandingPage",component:Dt},{path:"/local/edit/:local_id",name:"LocalProfileEdit",component:Xt,props:!0},{path:"/local/profile/:local_id",name:"LocalProfilePage",component:he,props:!0}],be=new B["a"]({mode:"history",base:"/",routes:ge}),_e=be,Ce=(a("4160"),a("4fad"),a("159b"),{citySearched:"",lastSearchedLocals:[]}),ye={citySearched:function(t){return t.citySearched},lastLoadedLocals:function(t){return t.lastSearchedLocals}},we={fetchLocalPreviews:function(t,e){return Object(d["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=t.commit,a.next=3,v.a.get("http://localhost:3000/api/locals/previews/city/".concat(e)).then((function(t){var a=[];Object.entries(t.data).forEach((function(t){a.push(t[1])})),o("SET_LOCAL_PREVIEWS",{localPreviewsArray:a,city:e})})).catch((function(t){console.log(t)}));case 3:case"end":return a.stop()}}),a)})))()}},xe={SET_LOCAL_PREVIEWS:function(t,e){t.citySearched=e.city,t.lastSearchedLocals=e.localPreviewsArray}},ke={state:Ce,getters:ye,actions:we,mutations:xe};o["a"].use(m["a"]);var Le={state:{status:"",token:localStorage.getItem("token")||"",user:{}},getters:{isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status}},actions:{login:function(t,e){return Object(d["a"])(regeneratorRuntime.mark((function a(){var o,i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=t.commit,o("auth_request"),a.next=4,v.a.post("http://localhost:3000/api/user/login",e);case 4:return i=a.sent,r=i.data,e=i.data.user,localStorage.setItem("token",r),v.a.defaults.headers.common["Authorization"]=r,o("auth_success",r,e),a.abrupt("return",e);case 11:case"end":return a.stop()}}),a)})))()},register:function(t,e){return Object(d["a"])(regeneratorRuntime.mark((function a(){var o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=t.commit,o("auth_request"),a.next=4,v.a.post("http://localhost:3000/api/user/register",e);case 4:i=a.sent,console.log(i);case 6:case"end":return a.stop()}}),a)})))()},logout:function(t){var e=t.commit;localStorage.removeItem("token"),delete v.a.defaults.headers.common["Authorization"],e("logout")}},mutations:{auth_request:function(t){t.status="loading"},auth_success:function(t,e,a){t.status="success",t.token=e,t.user=a},auth_error:function(t){t.status="error"},logout:function(t){t.status="",t.token="",t.user={}}},modules:{}};o["a"].use(m["a"]);var Se=new m["a"].Store({modules:{local:Le,auth:ke}}),Ie=a("f309");o["a"].use(Ie["a"]);var Pe=new Ie["a"]({}),Ae=(a("4989"),a("ab8b"),a("9985"));o["a"].component("vue-img-preview",Ae["vueImgPreview"]),o["a"].config.productionTip=!1,o["a"].prototype.$http=v.a;var Ee=localStorage.getItem("token");Ee&&(o["a"].prototype.$http.defaults.headers.common["Authorization"]=Ee);var $e=new o["a"];new o["a"]({router:_e,store:Se,vuetify:Pe,render:function(t){return t(D)}}).$mount("#app")},"5e80":function(t,e,a){"use strict";var o=a("0c62"),i=a.n(o);i.a},"62c8":function(t,e,a){},"6eef":function(t,e,a){"use strict";var o=a("4805"),i=a.n(o);i.a},"79b0":function(t,e,a){"use strict";var o=a("a787"),i=a.n(o);i.a},"865c":function(t,e,a){},"8a23":function(t,e,a){},"9a95":function(t,e,a){},"9b05":function(t,e,a){"use strict";var o=a("3b9a"),i=a.n(o);i.a},"9c3c":function(t,e,a){},a626:function(t,e,a){},a787:function(t,e,a){},b209:function(t,e,a){},bf30:function(t,e,a){"use strict";var o=a("f236"),i=a.n(o);i.a},c0ec:function(t,e,a){},c164:function(t,e,a){"use strict";var o=a("62c8"),i=a.n(o);i.a},c1c9:function(t,e,a){"use strict";var o=a("9a95"),i=a.n(o);i.a},e13d:function(t,e,a){"use strict";var o=a("1ea0"),i=a.n(o);i.a},ed0b:function(t,e,a){},f236:function(t,e,a){}});
//# sourceMappingURL=app.90d49f0b.js.map